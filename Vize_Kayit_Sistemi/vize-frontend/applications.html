<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Başvurular</title>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.4.1/css/responsive.dataTables.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { font-family: 'Poppins', sans-serif; background: #f8f9fa; margin:0; padding:0; }

    /* Navbar mobil uyumu */
    .navbar-nav .nav-link { padding:10px 15px; }
    .navbar-toggler { border:none; font-size:1.3rem; }

    /* Tablo */
    .container { overflow-x: auto; padding: 15px; }
    table.dataTable { width:100% !important; border-collapse: collapse; font-size:14px; }
    table.dataTable th, table.dataTable td { text-align:center; vertical-align:middle; padding:8px; }

    /* Modal */
    #imgModal { 
      display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
      background:rgba(0,0,0,0.8); text-align:center; z-index:9999;
    }
    #imgModal img { 
      max-width:95%; max-height:80%; margin-top:10%; 
      border:3px solid #fff; border-radius:8px; 
    }
    #imgModal span { 
      position:absolute; top:15px; right:20px; font-size:40px; 
      color:#fff; cursor:pointer; font-weight:bold; 
    }

    img.preview { max-height:50px; cursor:pointer; border-radius:4px; transition:0.2s; }
    img.preview:hover { transform:scale(1.1); }

    /* ✅ Tablet ve Telefon için özel düzen */
    @media(max-width:992px) {
      table.dataTable { font-size:13px; }
      .btn { font-size:14px; padding:6px 10px; }
    }
    @media(max-width:768px) {
      h3 { font-size:20px; text-align:center; }
      table.dataTable th, table.dataTable td { font-size:12px; }
      .navbar-brand { font-size:18px; }
      .btn { font-size:13px; padding:5px 8px; }
      /* Satırları blok görünüme dönüştür */
      table.dataTable tbody tr { display:block; margin-bottom:10px; border:1px solid #ddd; border-radius:6px; padding:8px; background:#fff; }
      table.dataTable tbody tr td { display:block; text-align:left; padding:4px 8px; border:none; }
      table.dataTable tbody tr td::before { content: attr(data-label); font-weight:bold; display:block; color:#555; }
    }
    @media(max-width:480px) {
      #imgModal img { max-width:90%; margin-top:20%; }
      #imgModal span { font-size:30px; top:10px; right:15px; }
    }
  </style>
</head>
<body>

<!-- ✅ Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="applications.html">Admin Panel</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link active" href="applications.html">📄 Başvurular</a></li>
        <li class="nav-item"><a class="nav-link" href="users.html">👥 Kullanıcı Yönetimi</a></li>
        <li class="nav-item"><a class="nav-link" href="logs.html">📝 Giriş Logları</a></li>
      </ul>
      <span class="navbar-text" id="userRole"></span>
      <button class="btn btn-danger ms-3" onclick="logout()">Çıkış</button>
    </div>
  </div>
</nav>

<!-- ✅ Tablo -->
<div class="container mt-3">
  <h3>📄 Başvurular</h3>
  <div class="table-responsive">
    <table id="applicationsTable" class="table table-striped table-bordered display responsive nowrap" style="width:100%">
      <thead>
        <tr>
          <th>Ad</th><th>Soyad</th><th>Email</th><th>Telefon</th>
          <th>Vize Tipi</th><th>Giriş</th><th>Express</th><th>Sigorta</th>
          <th>Pasaport</th><th>Biyometrik</th><th>Otel Rez.</th><th>Uçak Bileti</th>
          <th>İşlemler</th>

        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<!-- ✅ Modal -->
<div id="imgModal"><span id="closeModal">&times;</span><img id="modalImage" src=""></div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.4.1/js/dataTables.responsive.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="common.js"></script>
<script src="applications.js"></script>

<script>
  // ✅ Modal Aç/Kapat
  document.addEventListener("click", function(e) {
    if (e.target.classList.contains("preview")) {
      document.getElementById("modalImage").src = e.target.src;
      document.getElementById("imgModal").style.display = "block";
    }
  });
  document.getElementById("closeModal").addEventListener("click", () => document.getElementById("imgModal").style.display = "none");
  document.getElementById("imgModal").addEventListener("click", (e) => { if(e.target.id === "imgModal") e.target.style.display="none"; });
</script>

</body>
</html>
